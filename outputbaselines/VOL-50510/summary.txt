VOL-50510

Purpose: Test if UPTO constraint not hit, allocations follow Percentage

Details: Percentage use case with UPTO configured such that Total Demand in the buy guide is < total UPTO configured for all the sources. All sources, ordering daily

UPTO constraint not to be hit, hence same results as if UPTO is not configured


5001@7001
                   startdate                   enddate vendor  rank  volume_exact  volume_upto  soq   srs  mso  buyguide percentage  actual_percentage  order_total
0  2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6001    -1          -1.0        500.0   70  40.0    0                 30.0          30.555556        360.0
4  2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6002    -1          -1.0        500.0  110   0.0    0                 30.0          30.555556        360.0
8  2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6003    -1          -1.0        500.0  140   0.0    0                 40.0          38.888889        360.0
1  2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6001    -1          -1.0        500.0  235   0.0    0                 50.0          50.000000        470.0
5  2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6002    -1          -1.0        500.0  120   0.0    0                 25.0          25.531915        470.0
9  2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6003    -1          -1.0        500.0  115   0.0    0                 25.0          24.468085        470.0
2  2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6001    -1          -1.0        500.0  105   0.0    0                 34.0          28.767123        365.0
6  2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6002    -1          -1.0        500.0  130   0.0    0                 33.0          35.616438        365.0
10 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6003    -1          -1.0        500.0  130   0.0    0                 33.0          35.616438        365.0
3  2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6001    -1          -1.0        500.0  290   0.0    0                 60.0          60.416667        480.0
7  2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6002    -1          -1.0        500.0   95   0.0    0                 20.0          19.791667        480.0
11 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6003    -1          -1.0        500.0   95   0.0    0                 20.0          19.791667        480.0
                        date  demand    ss  avo  schedrcpt  mso  soq  6001  6002  6003  projoh  projavail  ignored_demand  incoming_supply
0  2021-02-01 00:00:00-05:00    43.0  15.0    0       40.0    0    0     0     0     0     0.0      -15.0             3.0                0
1  2021-02-02 00:00:00-05:00    57.0  15.0    0        0.0    0    0     0     0     0     0.0      -15.0            57.0                0
2  2021-02-03 00:00:00-05:00    34.0  15.0    0        0.0    0   50     0    25    25    16.0        1.0             0.0               50
3  2021-02-04 00:00:00-05:00    98.0  15.0    0        0.0    0  100    20    15    65    18.0        3.0             0.0              100
4  2021-02-05 00:00:00-05:00    54.0  15.0    0        0.0    0   55    15    35     5    19.0        4.0             0.0               55
5  2021-02-06 00:00:00-05:00    61.0  15.0    0        0.0    0   60    20    15    25    18.0        3.0             0.0               60
6  2021-02-07 00:00:00-05:00    54.0  15.0    0        0.0    0   55    15    20    20    19.0        4.0             0.0               55
7  2021-02-08 00:00:00-05:00    74.0  20.0    0        0.0    0   75    40    20    15    20.0        0.0             0.0               75
8  2021-02-09 00:00:00-05:00    34.0  20.0    0        0.0    0   35    15    10    10    21.0        1.0             0.0               35
9  2021-02-10 00:00:00-05:00    43.0  20.0    0        0.0    0   45    25    10    10    23.0        3.0             0.0               45
10 2021-02-11 00:00:00-05:00   101.0  20.0    0        0.0    0  100    50    25    25    22.0        2.0             0.0              100
11 2021-02-12 00:00:00-05:00    63.0  20.0    0        0.0    0   65    30    15    20    24.0        4.0             0.0               65
12 2021-02-13 00:00:00-05:00    55.0  20.0    0        0.0    0   55    30    15    10    24.0        4.0             0.0               55
13 2021-02-14 00:00:00-05:00    95.0  20.0    0        0.0    0   95    45    25    25    24.0        4.0             0.0               95
14 2021-02-15 00:00:00-05:00    72.0  10.0    0        0.0    0   60    20    20    20    12.0        2.0             0.0               60
15 2021-02-16 00:00:00-05:00    69.0  10.0    0        0.0    0   70    25    25    20    13.0        3.0             0.0               70
16 2021-02-17 00:00:00-05:00    70.0  10.0    0        0.0    0   70    25    20    25    13.0        3.0             0.0               70
17 2021-02-18 00:00:00-05:00    25.0  10.0    0        0.0    0   25    10    10     5    13.0        3.0             0.0               25
18 2021-02-19 00:00:00-05:00    39.0  10.0    0        0.0    0   40    10    15    15    14.0        4.0             0.0               40
19 2021-02-20 00:00:00-05:00    90.0  10.0    0        0.0    0   90     5    40    45    14.0        4.0             0.0               90
20 2021-02-21 00:00:00-05:00    10.0  10.0    0        0.0    0   10    10     0     0    14.0        4.0             0.0               10
                  startdate                   enddate  volume_exact  volume_upto  ordered_total  srs_and_mso  aop_and_ss_and_avo  net_ss  ignored_demand
0 2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00          -3.0       1500.0            320         40.0               416.0    15.0           -56.0
1 2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00          -3.0       1500.0            470          0.0               470.0     5.0             0.0
2 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00          -3.0       1500.0            365          0.0               365.0   -10.0             0.0
3 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00          -3.0       1500.0            480          0.0                 0.0     0.0           480.0
5002@7001
                  startdate                   enddate vendor  rank  volume_exact  volume_upto  soq  srs  mso  buyguide percentage  actual_percentage  order_total
0 2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6001    -1          -1.0        500.0  168  4.0    0                 50.0          50.000000        344.0
4 2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6002    -1          -1.0        500.0  172  0.0    0                 50.0          50.000000        344.0
1 2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6001    -1          -1.0        500.0  272  0.0    0                 60.0          59.649123        456.0
5 2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6002    -1          -1.0        500.0  184  0.0    0                 40.0          40.350877        456.0
2 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6001    -1          -1.0        500.0  296  0.0    0                 75.0          74.747475        396.0
6 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6002    -1          -1.0        500.0  100  0.0    0                 25.0          25.252525        396.0
3 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6001    -1          -1.0        500.0  228  0.0    0                 60.0          61.290323        372.0
7 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6002    -1          -1.0        500.0  144  0.0    0                 40.0          38.709677        372.0
                        date  demand    ss  avo  schedrcpt  mso  soq  6001  6002  projoh  projavail  ignored_demand  incoming_supply
0  2021-02-01 00:00:00-05:00    13.0  15.0    0        0.0    0    0     0     0     0.0      -15.0            13.0                0
1  2021-02-02 00:00:00-05:00    54.0  15.0    0        0.0    0    0     0     0     0.0      -15.0            54.0                0
2  2021-02-03 00:00:00-05:00    88.0  15.0    0        0.0    0  104    52    52    16.0        1.0             0.0              104
3  2021-02-04 00:00:00-05:00    71.0  15.0    0        0.0    0   72    36    36    17.0        2.0             0.0               72
4  2021-02-05 00:00:00-05:00    39.0  15.0    0        4.0    0   36    16    20    18.0        3.0             0.0               36
5  2021-02-06 00:00:00-05:00    95.0  15.0    0        0.0    0   92    48    44    15.0        0.0             0.0               92
6  2021-02-07 00:00:00-05:00    33.0  15.0    0        0.0    0   36    16    20    18.0        3.0             0.0               36
7  2021-02-08 00:00:00-05:00    72.0  20.0    0        0.0    0   76    48    28    22.0        2.0             0.0               76
8  2021-02-09 00:00:00-05:00    68.0  20.0    0        0.0    0   68    40    28    22.0        2.0             0.0               68
9  2021-02-10 00:00:00-05:00    68.0  20.0    0        0.0    0   68    40    28    22.0        2.0             0.0               68
10 2021-02-11 00:00:00-05:00    46.0  20.0    0        0.0    0   44    28    16    20.0        0.0             0.0               44
11 2021-02-12 00:00:00-05:00    39.0  20.0    0        0.0    0   40    24    16    21.0        1.0             0.0               40
12 2021-02-13 00:00:00-05:00    96.0  20.0    0        0.0    0   96    56    40    21.0        1.0             0.0               96
13 2021-02-14 00:00:00-05:00    62.0  20.0    0        0.0    0   64    36    28    23.0        3.0             0.0               64
14 2021-02-15 00:00:00-05:00    67.0  10.0    0        0.0    0   56    44    12    12.0        2.0             0.0               56
15 2021-02-16 00:00:00-05:00    37.0  10.0    0        0.0    0   36    28     8    11.0        1.0             0.0               36
16 2021-02-17 00:00:00-05:00    24.0  10.0    0        0.0    0   24    16     8    11.0        1.0             0.0               24
17 2021-02-18 00:00:00-05:00    71.0  10.0    0        0.0    0   72    52    20    12.0        2.0             0.0               72
18 2021-02-19 00:00:00-05:00    89.0  10.0    0        0.0    0   88    68    20    11.0        1.0             0.0               88
19 2021-02-20 00:00:00-05:00    34.0  10.0    0        0.0    0   36    24    12    13.0        3.0             0.0               36
20 2021-02-21 00:00:00-05:00    85.0  10.0    0        0.0    0   84    64    20    12.0        2.0             0.0               84
                  startdate                   enddate  volume_exact  volume_upto  ordered_total  srs_and_mso  aop_and_ss_and_avo  net_ss  ignored_demand
0 2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00          -2.0       1000.0            340          4.0               408.0    15.0           -64.0
1 2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00          -2.0       1000.0            456          0.0               456.0     5.0             0.0
2 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00          -2.0       1000.0            396          0.0               397.0   -10.0            -1.0
3 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00          -2.0       1000.0            372          0.0                 0.0     0.0           372.0
