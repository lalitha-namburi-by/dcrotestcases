VOL-50511

Purpose:Test if UPTO constraint is respected and exception generated


Details:Percentage use case with UPTO configured such that Total Demand in the buy guide is > total UPTO configured for all the sources.All sources, ordering daily
UPTO constraint is hit and we get the unmet demand exception

results :
SRS=40 considered and only SOQ=35 created for 6001

5001@7001
                   startdate                   enddate vendor  rank  volume_exact  volume_upto  soq   srs  mso  buyguide percentage  actual_percentage  order_total
0  2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6001    -1          -1.0         75.0   35  40.0    0                 30.0          33.333333        225.0
4  2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6002    -1          -1.0         75.0   75   0.0    0                 30.0          33.333333        225.0
8  2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6003    -1          -1.0         75.0   75   0.0    0                 40.0          33.333333        225.0
1  2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6001    -1          -1.0         75.0   75   0.0    0                 50.0          33.333333        225.0
5  2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6002    -1          -1.0         75.0   75   0.0    0                 25.0          33.333333        225.0
9  2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6003    -1          -1.0         75.0   75   0.0    0                 25.0          33.333333        225.0
2  2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6001    -1          -1.0         75.0   75   0.0    0                 34.0          33.333333        225.0
6  2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6002    -1          -1.0         75.0   75   0.0    0                 33.0          33.333333        225.0
10 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6003    -1          -1.0         75.0   75   0.0    0                 33.0          33.333333        225.0
3  2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6001    -1          -1.0         75.0   75   0.0    0                 60.0          33.333333        225.0
7  2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6002    -1          -1.0         75.0   75   0.0    0                 20.0          33.333333        225.0
11 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6003    -1          -1.0         75.0   75   0.0    0                 20.0          33.333333        225.0
                        date  demand    ss  avo  schedrcpt  mso  soq  6001  6002  6003  projoh  projavail  ignored_demand  incoming_supply
0  2021-02-01 00:00:00-05:00    43.0  15.0    0       40.0    0    0     0     0     0     0.0      -15.0             3.0                0
1  2021-02-02 00:00:00-05:00    57.0  15.0    0        0.0    0    0     0     0     0     0.0      -15.0            57.0                0
2  2021-02-03 00:00:00-05:00    34.0  15.0    0        0.0    0   50     0    25    25    16.0        1.0             0.0               50
3  2021-02-04 00:00:00-05:00    98.0  15.0    0        0.0    0   85    20    15    50     3.0      -12.0             0.0               85
4  2021-02-05 00:00:00-05:00    54.0  15.0    0        0.0    0   50    15    35     0     0.0      -15.0             1.0               50
5  2021-02-06 00:00:00-05:00    61.0  15.0    0        0.0    0    0     0     0     0     0.0      -15.0            61.0                0
6  2021-02-07 00:00:00-05:00    54.0  15.0    0        0.0    0    0     0     0     0     0.0      -15.0            54.0                0
7  2021-02-08 00:00:00-05:00    74.0  20.0    0        0.0    0   95    50    25    20    21.0        1.0             0.0               95
8  2021-02-09 00:00:00-05:00    34.0  20.0    0        0.0    0   35    15    10    10    22.0        2.0             0.0               35
9  2021-02-10 00:00:00-05:00    43.0  20.0    0        0.0    0   45    10    15    20    24.0        4.0             0.0               45
10 2021-02-11 00:00:00-05:00   101.0  20.0    0        0.0    0   50     0    25    25     0.0      -20.0            27.0               50
11 2021-02-12 00:00:00-05:00    63.0  20.0    0        0.0    0    0     0     0     0     0.0      -20.0            63.0                0
12 2021-02-13 00:00:00-05:00    55.0  20.0    0        0.0    0    0     0     0     0     0.0      -20.0            55.0                0
13 2021-02-14 00:00:00-05:00    95.0  20.0    0        0.0    0    0     0     0     0     0.0      -20.0            95.0                0
14 2021-02-15 00:00:00-05:00    72.0  10.0    0        0.0    0   85    30    30    25    13.0        3.0             0.0               85
15 2021-02-16 00:00:00-05:00    69.0  10.0    0        0.0    0   70    25    20    25    14.0        4.0             0.0               70
16 2021-02-17 00:00:00-05:00    70.0  10.0    0        0.0    0   70    20    25    25    14.0        4.0             0.0               70
17 2021-02-18 00:00:00-05:00    25.0  10.0    0        0.0    0    0     0     0     0     0.0      -10.0            11.0                0
18 2021-02-19 00:00:00-05:00    39.0  10.0    0        0.0    0    0     0     0     0     0.0      -10.0            39.0                0
19 2021-02-20 00:00:00-05:00    90.0  10.0    0        0.0    0    0     0     0     0     0.0      -10.0            90.0                0
20 2021-02-21 00:00:00-05:00    10.0  10.0    0        0.0    0    0     0     0     0     0.0      -10.0            10.0                0
                  startdate                   enddate  volume_exact  volume_upto  ordered_total  srs_and_mso  aop_and_ss_and_avo  net_ss  ignored_demand
0 2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00          -3.0        225.0            185         40.0               416.0    15.0          -191.0
1 2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00          -3.0        225.0            225          0.0               470.0     5.0          -245.0
2 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00          -3.0        225.0            225          0.0               365.0   -10.0          -140.0
3 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00          -3.0        225.0            225          0.0                 0.0     0.0           225.0
5002@7001
                  startdate                   enddate vendor  rank  volume_exact  volume_upto  soq  srs  mso  buyguide percentage  actual_percentage  order_total
0 2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6001    -1          -1.0         75.0   68  4.0    0                 50.0               50.0        144.0
4 2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00   6002    -1          -1.0         75.0   72  0.0    0                 50.0               50.0        144.0
1 2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6001    -1          -1.0         75.0   72  0.0    0                 60.0               50.0        144.0
5 2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00   6002    -1          -1.0         75.0   72  0.0    0                 40.0               50.0        144.0
2 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6001    -1          -1.0         75.0   72  0.0    0                 75.0               50.0        144.0
6 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00   6002    -1          -1.0         75.0   72  0.0    0                 25.0               50.0        144.0
3 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6001    -1          -1.0         75.0   72  0.0    0                 60.0               50.0        144.0
7 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00   6002    -1          -1.0         75.0   72  0.0    0                 40.0               50.0        144.0
                        date  demand    ss  avo  schedrcpt  mso  soq  6001  6002  projoh  projavail  ignored_demand  incoming_supply
0  2021-02-01 00:00:00-05:00    13.0  15.0    0        0.0    0    0     0     0     0.0      -15.0            13.0                0
1  2021-02-02 00:00:00-05:00    54.0  15.0    0        0.0    0    0     0     0     0.0      -15.0            54.0                0
2  2021-02-03 00:00:00-05:00    88.0  15.0    0        0.0    0  104    52    52    16.0        1.0             0.0              104
3  2021-02-04 00:00:00-05:00    71.0  15.0    0        0.0    0   36    16    20     0.0      -15.0            19.0               36
4  2021-02-05 00:00:00-05:00    39.0  15.0    0        4.0    0    0     0     0     0.0      -15.0            35.0                0
5  2021-02-06 00:00:00-05:00    95.0  15.0    0        0.0    0    0     0     0     0.0      -15.0            95.0                0
6  2021-02-07 00:00:00-05:00    33.0  15.0    0        0.0    0    0     0     0     0.0      -15.0            33.0                0
7  2021-02-08 00:00:00-05:00    72.0  20.0    0        0.0    0   92    56    36    20.0        0.0             0.0               92
8  2021-02-09 00:00:00-05:00    68.0  20.0    0        0.0    0   52    16    36     4.0      -16.0             0.0               52
9  2021-02-10 00:00:00-05:00    68.0  20.0    0        0.0    0    0     0     0     0.0      -20.0            64.0                0
10 2021-02-11 00:00:00-05:00    46.0  20.0    0        0.0    0    0     0     0     0.0      -20.0            46.0                0
11 2021-02-12 00:00:00-05:00    39.0  20.0    0        0.0    0    0     0     0     0.0      -20.0            39.0                0
12 2021-02-13 00:00:00-05:00    96.0  20.0    0        0.0    0    0     0     0     0.0      -20.0            96.0                0
13 2021-02-14 00:00:00-05:00    62.0  20.0    0        0.0    0    0     0     0     0.0      -20.0            62.0                0
14 2021-02-15 00:00:00-05:00    67.0  10.0    0        0.0    0   80    60    20    13.0        3.0             0.0               80
15 2021-02-16 00:00:00-05:00    37.0  10.0    0        0.0    0   36    12    24    12.0        2.0             0.0               36
16 2021-02-17 00:00:00-05:00    24.0  10.0    0        0.0    0   24     0    24    12.0        2.0             0.0               24
17 2021-02-18 00:00:00-05:00    71.0  10.0    0        0.0    0    4     0     4     0.0      -10.0            55.0                4
18 2021-02-19 00:00:00-05:00    89.0  10.0    0        0.0    0    0     0     0     0.0      -10.0            89.0                0
19 2021-02-20 00:00:00-05:00    34.0  10.0    0        0.0    0    0     0     0     0.0      -10.0            34.0                0
20 2021-02-21 00:00:00-05:00    85.0  10.0    0        0.0    0    0     0     0     0.0      -10.0            85.0                0
                  startdate                   enddate  volume_exact  volume_upto  ordered_total  srs_and_mso  aop_and_ss_and_avo  net_ss  ignored_demand
0 2021-02-01 00:00:00+00:00 2021-02-08 00:00:00+00:00          -2.0        150.0            140          4.0               408.0    15.0          -264.0
1 2021-02-08 00:00:00+00:00 2021-02-15 00:00:00+00:00          -2.0        150.0            144          0.0               456.0     5.0          -312.0
2 2021-02-15 00:00:00+00:00 2021-02-22 00:00:00+00:00          -2.0        150.0            144          0.0               397.0   -10.0          -253.0
3 2021-02-22 00:00:00+00:00 2021-03-01 00:00:00+00:00          -2.0        150.0            144          0.0                 0.0     0.0           144.0
